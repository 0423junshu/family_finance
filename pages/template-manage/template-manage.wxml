<!-- pages/template-manage/template-manage.wxml -->
<view class="safe-area-wrapper safe-area-white">
  <navigation-bar title="记账模板" show-back="{{true}}" class="transparent-navbar" />
</view>

<!-- 操作指引浮层 -->
<view wx:if="{{showGuide}}" class="guide-overlay" bindtap="hideGuide">
  <view class="guide-content" catchtap="preventClose">
    <view class="guide-header">
      <text class="guide-title">使用指引</text>
      <text class="guide-close" bindtap="hideGuide">×</text>
    </view>
    <view class="guide-steps">
      <view class="guide-step">
        <view class="step-number">1</view>
        <text class="step-text">点击"使用"按钮快速创建记账记录</text>
      </view>
      <view class="guide-step">
        <view class="step-number">2</view>
        <text class="step-text">点击"编辑"修改模板信息</text>
      </view>
      <view class="guide-step">
        <view class="step-number">3</view>
        <text class="step-text">点击"+"添加新的记账模板</text>
      </view>
    </view>
    <view class="guide-footer">
      <button class="guide-btn" bindtap="hideGuide">我知道了</button>
    </view>
  </view>
</view>

<view class="page-container">
  <!-- 空状态提示 -->
  <view wx:if="{{templates.length === 0}}" class="empty-state">
    <view class="empty-icon">📝</view>
    <view class="empty-title">暂无记账模板</view>
    <view class="empty-desc">创建模板可以快速记录常用的收支项目</view>
    <button class="empty-btn" bindtap="onAddTemplate">创建第一个模板</button>
  </view>

  <!-- 模板列表 -->
  <view wx:else class="template-list">
    <view class="list-header">
      <text class="list-title">我的模板</text>
      <text class="guide-trigger" bindtap="showGuide">使用说明</text>
    </view>
    <view 
      wx:for="{{templates}}" 
      wx:key="id"
      class="template-item"
    >
      <view class="template-icon">{{item.icon}}</view>
      <view class="template-info">
        <text class="template-name">{{item.name}}</text>
        <text class="template-detail">
          {{item.categoryName}} · {{item.accountName}}
        </text>
      </view>
      <view class="template-amount">
        <text class="amount {{item.type === 'income' ? 'income' : 'expense'}}">
          <block wx:if="{{item.type === 'income'}}">+</block>
          <block wx:else>-</block>{{item.amountDisplay}}
        </text>
      </view>
      <view class="template-actions">
        <button 
          class="action-btn use"
          data-id="{{item.id}}"
          bindtap="onUseTemplate"
          hover-class="btn-hover"
        >
          使用
        </button>
        <button 
          class="action-btn edit"
          data-id="{{item.id}}"
          bindtap="onEditTemplate"
          hover-class="btn-hover"
        >
          编辑
        </button>
        <button 
          class="action-btn delete"
          data-id="{{item.id}}"
          bindtap="onDeleteTemplate"
          hover-class="btn-hover"
        >
          删除
        </button>
      </view>
    </view>
  </view>

  <!-- 添加按钮 -->
  <view class="add-template-btn" bindtap="onAddTemplate">
    <text class="add-icon">+</text>
    <text class="add-text">添加模板</text>
  </view>
</view>