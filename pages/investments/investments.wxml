<!-- pages/investments/investments.wxml -->
<view class="safe-area-wrapper safe-area-white">
  <navigation-bar title="å®¶åº­è´¢åŠ¡ç®¡ç†" show-back="{{false}}" class="transparent-navbar" />
</view>

<view class="page-container">
  <!-- æ€»è§ˆå¡ç‰‡ -->
  <view class="overview-card">
    <view class="overview-tools">
      <view class="eye-toggle" catchtap="onEyeToggle" style="font-size:16px;line-height:16px;">{{pageMoneyVisible ? 'ğŸ‘' : 'ğŸ™ˆ'}}</view>
    </view>
    <view class="overview-item">
      <text class="overview-label">æ€»èµ„äº§</text>
      <text class="overview-value">{{ pageMoneyVisible ? totalAssetsDisplay : '***' }}</text>
    </view>
    <view class="overview-item">
      <text class="overview-label">æ€»æ”¶ç›Š</text>
      <text class="overview-value {{totalReturn >= 0 ? 'positive' : 'negative'}}">
        {{ pageMoneyVisible ? ((totalReturn >= 0 ? '+' : '') + totalReturnDisplay) : '***' }}
      </text>
    </view>
    <view class="overview-item">
      <text class="overview-label">æ”¶ç›Šç‡</text>
      <text class="overview-value {{returnRate >= 0 ? 'positive' : 'negative'}}">
        {{ pageMoneyVisible ? ((returnRate >= 0 ? '+' : '') + returnRateDisplay + '%') : '***' }}
      </text>
    </view>
  </view>

  <!-- æ ‡ç­¾æ  -->
  <view class="tab-bar">
    <view 
      wx:for="{{tabs}}" 
      wx:key="index"
      class="tab-item {{currentTab === index ? 'active' : ''}}"
      data-index="{{index}}"
      bindtap="onTabChange"
    >
      {{item}}
    </view>
  </view>

  <!-- æŠ•èµ„åˆ—è¡¨ -->
  <view class="investment-list">
    <view 
      wx:for="{{investments}}" 
      wx:key="id"
      class="investment-item"
      data-id="{{item.id}}"
      bindtap="onInvestmentDetail"
    >
      <view class="investment-icon">{{item.icon}}</view>
      <view class="investment-info">
        <text class="investment-name">{{item.name}}</text>
        <text class="investment-amount">{{ pageMoneyVisible ? item.amountDisplay : '***' }}</text>
      </view>
      <view class="investment-return">
        <text class="return-amount {{item.return >= 0 ? 'positive' : 'negative'}}">
          {{ pageMoneyVisible ? ((item.return >= 0 ? '+' : '') + item.returnDisplay) : '***' }}
        </text>
        <text class="return-rate {{item.returnRate >= 0 ? 'positive' : 'negative'}}">
          {{ pageMoneyVisible ? ((item.returnRate >= 0 ? '+' : '') + item.returnRateDisplay + '%') : '***' }}
        </text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{investments.length === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— æŠ•èµ„è®°å½•</text>
    <text class="empty-desc">ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®æ·»åŠ æŠ•èµ„</text>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn" bindtap="onAddInvestment">
    <text class="add-icon">+</text>
  </view>

  <!-- åˆ·æ–°æŒ‰é’® -->
  <view class="refresh-btn" bindtap="onRefresh">
    <text class="refresh-icon">ğŸ”„</text>
  </view>
</view>