# å®¶åº­åä½œåŠŸèƒ½é—®é¢˜è®°å½•

## é—®é¢˜è®°å½•è¯´æ˜

æœ¬æ–‡æ¡£è®°å½•åœ¨å®¶åº­åä½œåŠŸèƒ½å¼€å‘å’Œæµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°çš„é—®é¢˜ã€è§£å†³æ–¹æ¡ˆå’Œä¼˜åŒ–å»ºè®®ã€‚

---

## ğŸš¨ æ ¸å¿ƒåŠŸèƒ½é—®é¢˜

### é—®é¢˜ #000: å®¶åº­åä½œåŠŸèƒ½å…¥å£ç¼ºå¤± â­â­â­
**å‘ç°æ—¶é—´**: 2025å¹´1æœˆ7æ—¥ 13:00  
**é—®é¢˜æè¿°**: ç”¨æˆ·åœ¨"æˆ‘çš„"é¡µé¢ä¸­æ‰¾ä¸åˆ°å®¶åº­åä½œåŠŸèƒ½å…¥å£  
**ä¸¥é‡çº§åˆ«**: P0 - é˜»å¡æ€§é—®é¢˜ (å½±å“æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨)  
**çŠ¶æ€**: âœ… å·²è§£å†³  

**æ ¹æœ¬åŸå› åˆ†æ**:
1. **è·¯ç”±é…ç½®é”™è¯¯**: `app.json`ä¸­TabBarçš„"æˆ‘çš„"æŒ‡å‘`pages/profile/profile`ï¼Œè€Œå®¶åº­åä½œåŠŸèƒ½å®ç°åœ¨`pages/me/me`
2. **åŠŸèƒ½é›†æˆç¼ºå¤±**: å®¶åº­åä½œåŠŸèƒ½åªåœ¨æœªä½¿ç”¨çš„`me`é¡µé¢å®ç°ï¼Œå®é™…ä½¿ç”¨çš„`profile`é¡µé¢ç¼ºå°‘è¯¥åŠŸèƒ½
3. **ç»„ä»¶é…ç½®ä¸å®Œæ•´**: `profile`é¡µé¢ç¼ºå°‘TDesignç»„ä»¶é…ç½®
4. **çŠ¶æ€ç®¡ç†ç¼ºå¤±**: `profile`é¡µé¢ç¼ºå°‘åä½œåŠŸèƒ½çš„æ•°æ®çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘

**å½±å“èŒƒå›´**:
- ç”¨æˆ·æ— æ³•è®¿é—®å®¶åº­åä½œåŠŸèƒ½
- æ— æ³•åˆ›å»ºæˆ–åŠ å…¥å®¶åº­
- æ— æ³•è¿›è¡Œåä½œè®°è´¦
- ä¸¥é‡å½±å“äº§å“æ ¸å¿ƒä»·å€¼

**è§£å†³æ–¹æ¡ˆ**:
1. **è·¯ç”±é…ç½®ä¼˜åŒ–**: ç¡®ä¿TabBaræ­£ç¡®æŒ‡å‘åŒ…å«åä½œåŠŸèƒ½çš„é¡µé¢
2. **åŠŸèƒ½å®Œæ•´è¿ç§»**: å°†å®¶åº­åä½œåŠŸèƒ½å®Œæ•´é›†æˆåˆ°`profile`é¡µé¢
   - æ•°æ®çŠ¶æ€: `collaborationEnabled`, `isInFamily`, `familyInfo`
   - ä¸šåŠ¡é€»è¾‘: `initCollaboration()`, `loadFamilyInfo()`, `refreshCollaborationStatus()`
   - äº‹ä»¶å¤„ç†: `onCollaborationTap()`, `onCreateFamily()`, `onJoinFamily()`
3. **ç»„ä»¶é…ç½®å®Œå–„**: åœ¨`profile.json`ä¸­æ·»åŠ æ‰€éœ€çš„TDesignç»„ä»¶
4. **æ ·å¼é›†æˆ**: æ·»åŠ å®Œæ•´çš„åä½œåŠŸèƒ½æ ·å¼å®šä¹‰
5. **åŒæ­¥çŠ¶æ€ç»„ä»¶**: é›†æˆåä½œåŒæ­¥çŠ¶æ€æŒ‡ç¤ºå™¨

**ä¿®å¤æ–‡ä»¶æ¸…å•**:
- âœ… `app.json` - è·¯ç”±é…ç½®ä¼˜åŒ–
- âœ… `pages/profile/profile.json` - ç»„ä»¶é…ç½®æ·»åŠ 
- âœ… `pages/profile/profile.wxml` - é¡µé¢ç»“æ„é›†æˆ
- âœ… `pages/profile/profile.js` - åŠŸèƒ½é€»è¾‘è¿ç§»
- âœ… `pages/profile/profile.wxss` - æ ·å¼å®šä¹‰æ·»åŠ 

**éªŒè¯ç»“æœ**: 
```
ğŸ‰ ä¿®å¤éªŒè¯é€šè¿‡ï¼5/5é¡¹éªŒè¯é€šè¿‡ (100%)
âœ… è·¯ç”±é…ç½®: é€šè¿‡
âœ… ç»„ä»¶é…ç½®: é€šè¿‡  
âœ… é¡µé¢ç»“æ„: é€šè¿‡
âœ… æ ·å¼é›†æˆ: é€šè¿‡
âœ… é€»è¾‘é›†æˆ: é€šè¿‡
```

**ç”¨æˆ·æ“ä½œæŒ‡å—**:
1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­é‡æ–°ç¼–è¯‘é¡¹ç›®
2. æ„å»º npm åŒ…: `å·¥å…· â†’ æ„å»º npm`
3. åˆ·æ–°"æˆ‘çš„"é¡µé¢æŸ¥çœ‹åä½œåŠŸèƒ½å…¥å£
4. éªŒè¯åä½œåŠŸèƒ½æ­£å¸¸å·¥ä½œ

**ä¿®å¤æ—¶é—´**: 2025å¹´1æœˆ7æ—¥ 13:00  
**éªŒè¯äººå‘˜**: CodeBuddy  
**ä¿®å¤ç‰ˆæœ¬**: v1.2.1  

---

## æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é—®é¢˜

### é—®é¢˜1: æµ‹è¯•è„šæœ¬ä¾èµ–ç¼ºå¤±

**é—®é¢˜æè¿°**: 
- æ‰§è¡Œæµ‹è¯•æ—¶å‡ºç° `Cannot find module './config/testConfig.js'` é”™è¯¯
- æµ‹è¯•å·¥å…·æ¨¡å—æœªæ­£ç¡®å¼•ç”¨

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**é—®é¢˜åŸå› **: 
- æµ‹è¯•é…ç½®æ–‡ä»¶å’Œå·¥å…·æ–‡ä»¶æœªåˆ›å»º
- æ¨¡å—å¼•ç”¨è·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
1. åˆ›å»ºäº† `test-automation/config/testConfig.js` é…ç½®æ–‡ä»¶
2. åˆ›å»ºäº† `test-automation/utils/testUtils.js` å·¥å…·æ–‡ä»¶
3. ä¿®æ­£äº†æ¨¡å—å¼•ç”¨æ–¹å¼

**ä¿®å¤ä»£ç **:
```javascript
// ä¿®å¤å‰
const testUtils = require('./utils/testUtils.js');

// ä¿®å¤å  
const TestUtils = require('./utils/testUtils.js');
```

**éªŒè¯ç»“æœ**: âœ… é—®é¢˜å·²è§£å†³ï¼Œæµ‹è¯•è„šæœ¬æ­£å¸¸è¿è¡Œ

---

## ä»£ç å®¡æŸ¥å‘ç°çš„æ½œåœ¨é—®é¢˜

### é—®é¢˜2: æ—¶é—´æˆ³è®¡ç®—å¼‚å¸¸

**é—®é¢˜æè¿°**:
- æµ‹è¯•æŠ¥å‘Šæ˜¾ç¤ºæ€»è€—æ—¶å¼‚å¸¸å¤§ (1757219121.34ç§’)
- æ—¶é—´æˆ³è®¡ç®—é€»è¾‘å­˜åœ¨é—®é¢˜

**é—®é¢˜çº§åˆ«**: P1 - ä¸¥é‡é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**é—®é¢˜åŸå› **:
- `Date.now()` è¿”å›çš„æ˜¯æ¯«ç§’æ—¶é—´æˆ³ï¼Œä½†è®¡ç®—é€»è¾‘æœ‰è¯¯
- å¯èƒ½å­˜åœ¨æ—¶é—´æˆ³é‡å¤ä½¿ç”¨çš„é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// é—®é¢˜ä»£ç ä½ç½®: test-automation/å®¶åº­åä½œåŠŸèƒ½æµ‹è¯•.js
// éœ€è¦ä¿®å¤æ—¶é—´è®¡ç®—é€»è¾‘

// ä¿®å¤å»ºè®®
class FamilyCollaborationTester {
  constructor() {
    this.testResults = [];
    this.currentTest = null;
    this.testStartTime = null; // ç¡®ä¿æ­£ç¡®åˆå§‹åŒ–
  }

  async runFullTestSuite() {
    this.testStartTime = Date.now(); // è®°å½•å¼€å§‹æ—¶é—´
    // ... æµ‹è¯•é€»è¾‘
    const totalDuration = Date.now() - this.testStartTime; // æ­£ç¡®è®¡ç®—è€—æ—¶
  }
}
```

**çŠ¶æ€**: ğŸ”„ å¾…ä¿®å¤

---

### é—®é¢˜3: é”™è¯¯å¤„ç†è¦†ç›–ä¸å®Œæ•´

**é—®é¢˜æè¿°**:
- å½“å‰æµ‹è¯•åªè¦†ç›–äº†æ­£å¸¸æµç¨‹
- ç¼ºå°‘å¼‚å¸¸æƒ…å†µå’Œé”™è¯¯å¤„ç†çš„æµ‹è¯•

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**å½±å“èŒƒå›´**:
- ç½‘ç»œå¼‚å¸¸å¤„ç†
- æƒé™éªŒè¯å¤±è´¥
- æ•°æ®æ ¼å¼é”™è¯¯
- å¹¶å‘æ“ä½œå†²çª

**æ”¹è¿›å»ºè®®**:
1. å¢åŠ ç½‘ç»œå¼‚å¸¸æ¨¡æ‹Ÿæµ‹è¯•
2. æ·»åŠ æƒé™éªŒè¯æµ‹è¯•ç”¨ä¾‹
3. å®ç°æ•°æ®éªŒè¯æµ‹è¯•
4. å¢åŠ å¹¶å‘æ“ä½œæµ‹è¯•

**å®æ–½è®¡åˆ’**: åœ¨ä¸‹ä¸€è½®å®Œæ•´æµ‹è¯•ä¸­è¡¥å……

---

## UI/UX ç›¸å…³é—®é¢˜

### é—®é¢˜4: ç§»åŠ¨ç«¯é€‚é…éªŒè¯ä¸å……åˆ†

**é—®é¢˜æè¿°**:
- å½“å‰æµ‹è¯•ä¸»è¦åŸºäºæ¨¡æ‹Ÿï¼Œç¼ºå°‘çœŸå®è®¾å¤‡éªŒè¯
- ä¸åŒå±å¹•å°ºå¯¸çš„é€‚é…æ•ˆæœæœªå……åˆ†éªŒè¯

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**å»ºè®®è§£å†³æ–¹æ¡ˆ**:
1. åœ¨çœŸå®è®¾å¤‡ä¸Šè¿›è¡Œæµ‹è¯•éªŒè¯
2. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„è®¾å¤‡æ¨¡æ‹ŸåŠŸèƒ½
3. æµ‹è¯•ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„æ˜¾ç¤ºæ•ˆæœ
4. éªŒè¯æ¨ªç«–å±åˆ‡æ¢çš„é€‚é…

**æµ‹è¯•è®¾å¤‡æ¸…å•**:
- iPhone SE (375Ã—667)
- iPhone 12 (390Ã—844) 
- iPhone 12 Pro Max (428Ã—926)
- å°ç±³æ‰‹æœº (393Ã—851)
- åä¸ºæ‰‹æœº (360Ã—780)

**çŠ¶æ€**: ğŸ”„ å¾…éªŒè¯

---

### é—®é¢˜5: æ— éšœç¢è®¿é—®æ”¯æŒç¼ºå¤±

**é—®é¢˜æè¿°**:
- å½“å‰UIè®¾è®¡æœªè€ƒè™‘æ— éšœç¢è®¿é—®
- ç¼ºå°‘å±å¹•é˜…è¯»å™¨æ”¯æŒ
- é¢œè‰²å¯¹æ¯”åº¦å¯èƒ½ä¸è¶³

**é—®é¢˜çº§åˆ«**: P3 - ä¼˜åŒ–å»ºè®®

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**æ”¹è¿›å»ºè®®**:
1. æ·»åŠ é€‚å½“çš„ `aria-label` å±æ€§
2. ç¡®ä¿é¢œè‰²å¯¹æ¯”åº¦ç¬¦åˆWCAGæ ‡å‡†
3. æ”¯æŒé”®ç›˜å¯¼èˆª
4. æä¾›è¯­éŸ³æç¤ºåŠŸèƒ½

**çŠ¶æ€**: ğŸ”„ å¾…ä¼˜åŒ–

---

## æ€§èƒ½ç›¸å…³é—®é¢˜

### é—®é¢˜6: å¤§å®¶åº­æˆå‘˜åˆ—è¡¨æ€§èƒ½

**é—®é¢˜æè¿°**:
- å½“å®¶åº­æˆå‘˜æ•°é‡è¾ƒå¤šæ—¶ï¼Œå¯èƒ½å½±å“é¡µé¢æ€§èƒ½
- æˆå‘˜åˆ—è¡¨æ¸²æŸ“å¯èƒ½é€ æˆå¡é¡¿

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**æ½œåœ¨å½±å“**:
- é¡µé¢åŠ è½½ç¼“æ…¢
- æ»šåŠ¨ä¸æµç•…
- å†…å­˜å ç”¨è¿‡é«˜

**ä¼˜åŒ–æ–¹æ¡ˆ**:
1. å®ç°è™šæ‹Ÿæ»šåŠ¨ (Virtual Scrolling)
2. åˆ†é¡µåŠ è½½æˆå‘˜åˆ—è¡¨
3. å›¾ç‰‡æ‡’åŠ è½½
4. æˆå‘˜ä¿¡æ¯ç¼“å­˜

```javascript
// ä¼˜åŒ–å»ºè®®ä»£ç 
// pages/family/family.js
async loadFamilyMembers(page = 1, pageSize = 20) {
  try {
    const result = await familyService.getFamilyMembers({
      page,
      pageSize,
      // åªåŠ è½½å¿…è¦å­—æ®µ
      fields: ['id', 'nickname', 'avatar', 'role', 'isOnline']
    });
    
    // åˆ†æ‰¹æ¸²æŸ“ï¼Œé¿å…ä¸€æ¬¡æ€§æ¸²æŸ“å¤§é‡æ•°æ®
    this.renderMembersInBatches(result.members);
    
  } catch (error) {
    console.error('åŠ è½½å®¶åº­æˆå‘˜å¤±è´¥:', error);
  }
}
```

**çŠ¶æ€**: ğŸ”„ å¾…ä¼˜åŒ–

---

### é—®é¢˜7: å†…å­˜æ³„æ¼é£é™©

**é—®é¢˜æè¿°**:
- åä½œåŠŸèƒ½ä½¿ç”¨äº†å¤§é‡äº‹ä»¶ç›‘å¬å™¨
- é¡µé¢å¸è½½æ—¶å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼é£é™©

**é—®é¢˜çº§åˆ«**: P1 - ä¸¥é‡é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**é£é™©ç‚¹**:
- äº‹ä»¶ç›‘å¬å™¨æœªæ­£ç¡®æ¸…ç†
- å®šæ—¶å™¨æœªæ¸…é™¤
- é—­åŒ…å¼•ç”¨æœªé‡Šæ”¾

**è§£å†³æ–¹æ¡ˆ**:
```javascript
// utils/collaborationHelper.js ä¼˜åŒ–
class CollaborationHelper {
  setupPageEventListeners(pageInstance, pageId) {
    // å­˜å‚¨æ¸…ç†å‡½æ•°
    const cleanupFunctions = [];
    
    // äº‹ä»¶ç›‘å¬å™¨
    const onSyncStatusChange = (status) => {
      // å¤„ç†é€»è¾‘
    };
    
    eventBus.on(EventTypes.SYNC_START, onSyncStatusChange);
    cleanupFunctions.push(() => {
      eventBus.off(EventTypes.SYNC_START, onSyncStatusChange);
    });
    
    // é¡µé¢å¸è½½æ—¶æ¸…ç†
    pageInstance._collaborationCleanup = () => {
      cleanupFunctions.forEach(cleanup => cleanup());
      cleanupFunctions.length = 0;
    };
  }
}
```

**çŠ¶æ€**: âœ… å·²åœ¨ä»£ç ä¸­å®ç°æ¸…ç†æœºåˆ¶

---

## å®‰å…¨ç›¸å…³é—®é¢˜

### é—®é¢˜8: å®¶åº­ç å®‰å…¨æ€§

**é—®é¢˜æè¿°**:
- å®¶åº­ç ç”Ÿæˆç®—æ³•ç›¸å¯¹ç®€å•
- å¯èƒ½å­˜åœ¨è¢«æš´åŠ›ç ´è§£çš„é£é™©

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**å½“å‰å®ç°**:
```javascript
// services/family.js
generateFamilyCode() {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let result = '';
  for (let i = 0; i < 6; i++) {
    result += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return result;
}
```

**å®‰å…¨é£é™©**:
- 6ä½å­—ç¬¦ç»„åˆç©ºé—´æœ‰é™ (36^6 â‰ˆ 21äº¿)
- çº¯éšæœºç”Ÿæˆï¼Œæ— æ—¶é—´æˆ³æˆ–ç”¨æˆ·ä¿¡æ¯æ··åˆ
- æ— é˜²æš´åŠ›ç ´è§£æœºåˆ¶

**æ”¹è¿›å»ºè®®**:
1. å¢åŠ å®¶åº­ç é•¿åº¦åˆ°8-10ä½
2. æ··åˆæ—¶é—´æˆ³å’Œç”¨æˆ·ä¿¡æ¯
3. æ·»åŠ å°è¯•æ¬¡æ•°é™åˆ¶
4. å®ç°å®¶åº­ç è¿‡æœŸæœºåˆ¶

```javascript
// æ”¹è¿›åçš„ç”Ÿæˆç®—æ³•
generateFamilyCode() {
  const timestamp = Date.now().toString(36);
  const random = Math.random().toString(36).substring(2, 8);
  const combined = (timestamp + random).toUpperCase();
  
  // å–8ä½å¹¶ç¡®ä¿å”¯ä¸€æ€§
  return combined.substring(0, 8);
}
```

**çŠ¶æ€**: ğŸ”„ å¾…ä¼˜åŒ–

---

### é—®é¢˜9: æƒé™éªŒè¯ä¸å¤Ÿä¸¥æ ¼

**é—®é¢˜æè¿°**:
- å‰ç«¯æƒé™éªŒè¯å¯èƒ½è¢«ç»•è¿‡
- ç¼ºå°‘åç«¯æƒé™äºŒæ¬¡éªŒè¯

**é—®é¢˜çº§åˆ«**: P1 - ä¸¥é‡é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**å®‰å…¨é£é™©**:
- ç”¨æˆ·å¯èƒ½é€šè¿‡ä¿®æ”¹å‰ç«¯ä»£ç ç»•è¿‡æƒé™æ£€æŸ¥
- æ•æ„Ÿæ“ä½œç¼ºå°‘åç«¯éªŒè¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½éœ€è¦åç«¯æƒé™éªŒè¯
2. å‰ç«¯æƒé™æ£€æŸ¥ä»…ç”¨äºUIæ˜¾ç¤ºæ§åˆ¶
3. å®ç°æ“ä½œæ—¥å¿—è®°å½•
4. æ·»åŠ å¼‚å¸¸æ“ä½œç›‘æ§

```javascript
// æ”¹è¿›å»ºè®®
// services/family.js
async removeMember(memberId) {
  try {
    // å‰ç«¯é¢„æ£€æŸ¥ï¼ˆä»…ç”¨äºUIï¼‰
    const hasPermission = await this.checkPermission('canRemoveMembers');
    if (!hasPermission) {
      throw new Error('æƒé™ä¸è¶³');
    }
    
    // åç«¯ä¼šå†æ¬¡éªŒè¯æƒé™
    const result = await wx.cloud.callFunction({
      name: 'removeFamilyMember',
      data: { memberId }
    });
    
    if (!result.success) {
      throw new Error(result.message);
    }
    
    return result;
  } catch (error) {
    // è®°å½•å¼‚å¸¸æ“ä½œ
    this.logSecurityEvent('UNAUTHORIZED_REMOVE_ATTEMPT', { memberId });
    throw error;
  }
}
```

**çŠ¶æ€**: ğŸ”„ å¾…åŠ å¼º

---

## æ•°æ®ä¸€è‡´æ€§é—®é¢˜

### é—®é¢˜10: å¹¶å‘æ“ä½œå†²çª

**é—®é¢˜æè¿°**:
- å¤šä¸ªç”¨æˆ·åŒæ—¶æ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´
- ç¼ºå°‘ä¹è§‚é”æˆ–æ‚²è§‚é”æœºåˆ¶

**é—®é¢˜çº§åˆ«**: P1 - ä¸¥é‡é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**åœºæ™¯ç¤ºä¾‹**:
- ç”¨æˆ·Aå’Œç”¨æˆ·BåŒæ—¶ä¿®æ”¹åŒä¸€æ¡è®°å½•
- ç”¨æˆ·Aåˆ é™¤è®°å½•æ—¶ï¼Œç”¨æˆ·Bæ­£åœ¨ç¼–è¾‘
- å¤šç”¨æˆ·åŒæ—¶é‚€è¯·æˆå‘˜å¯¼è‡´è¶…å‡ºé™åˆ¶

**è§£å†³æ–¹æ¡ˆ**:
1. å®ç°æ•°æ®ç‰ˆæœ¬æ§åˆ¶
2. æ·»åŠ æ“ä½œé”æœºåˆ¶
3. å®ç°å†²çªæ£€æµ‹å’Œè§£å†³
4. æä¾›å†²çªæç¤ºå’Œå¤„ç†é€‰é¡¹

```javascript
// å†²çªæ£€æµ‹ç¤ºä¾‹
async updateTransaction(transactionId, updateData) {
  try {
    // è·å–å½“å‰æ•°æ®ç‰ˆæœ¬
    const currentData = await this.getTransaction(transactionId);
    
    // æ£€æŸ¥ç‰ˆæœ¬å†²çª
    if (currentData.version !== updateData.expectedVersion) {
      throw new ConflictError('æ•°æ®å·²è¢«å…¶ä»–ç”¨æˆ·ä¿®æ”¹ï¼Œè¯·åˆ·æ–°åé‡è¯•');
    }
    
    // æ›´æ–°æ•°æ®å¹¶é€’å¢ç‰ˆæœ¬å·
    updateData.version = currentData.version + 1;
    updateData.lastModifiedBy = this.getCurrentUserId();
    updateData.lastModifiedAt = new Date();
    
    return await this.saveTransaction(transactionId, updateData);
    
  } catch (error) {
    if (error instanceof ConflictError) {
      // æä¾›å†²çªè§£å†³é€‰é¡¹
      this.showConflictResolution(error);
    }
    throw error;
  }
}
```

**çŠ¶æ€**: ğŸ”„ å¾…å®ç°

---

## æµ‹è¯•è¦†ç›–åº¦é—®é¢˜

### é—®é¢˜11: è¾¹ç•Œæ¡ä»¶æµ‹è¯•ä¸è¶³

**é—®é¢˜æè¿°**:
- å½“å‰æµ‹è¯•ä¸»è¦è¦†ç›–æ­£å¸¸æµç¨‹
- è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µæµ‹è¯•ä¸è¶³

**é—®é¢˜çº§åˆ«**: P2 - ä¸€èˆ¬é—®é¢˜

**å‘ç°æ—¶é—´**: 2025-01-07 12:00

**ç¼ºå¤±çš„æµ‹è¯•åœºæ™¯**:
1. **æ•°æ®è¾¹ç•Œæµ‹è¯•**:
   - å®¶åº­åç§°é•¿åº¦é™åˆ¶
   - æˆå‘˜æ•°é‡ä¸Šé™
   - å¤§é‡æ•°æ®åŠ è½½

2. **ç½‘ç»œå¼‚å¸¸æµ‹è¯•**:
   - ç½‘ç»œä¸­æ–­æ¢å¤
   - è¯·æ±‚è¶…æ—¶å¤„ç†
   - å¼±ç½‘ç¯å¢ƒé€‚åº”

3. **ç”¨æˆ·è¡Œä¸ºæµ‹è¯•**:
   - å¿«é€Ÿè¿ç»­ç‚¹å‡»
   - é¡µé¢å¿«é€Ÿåˆ‡æ¢
   - å¼‚å¸¸æ“ä½œåºåˆ—

**è¡¥å……æµ‹è¯•è®¡åˆ’**:
```javascript
// è¾¹ç•Œæ¡ä»¶æµ‹è¯•ç”¨ä¾‹
const boundaryTests = [
  {
    name: 'å®¶åº­åç§°é•¿åº¦æµ‹è¯•',
    cases: [
      { input: '', expected: 'error' },
      { input: 'a'.repeat(50), expected: 'success' },
      { input: 'a'.repeat(51), expected: 'error' }
    ]
  },
  {
    name: 'æˆå‘˜æ•°é‡é™åˆ¶æµ‹è¯•',
    cases: [
      { memberCount: 10, expected: 'success' },
      { memberCount: 11, expected: 'error' }
    ]
  }
];
```

**çŠ¶æ€**: ğŸ”„ å¾…è¡¥å……

---

## é—®é¢˜ç»Ÿè®¡å’Œä¼˜å…ˆçº§

### é—®é¢˜åˆ†å¸ƒ
- **P0 - é˜»å¡æ€§é—®é¢˜**: 0ä¸ª
- **P1 - ä¸¥é‡é—®é¢˜**: 3ä¸ª
- **P2 - ä¸€èˆ¬é—®é¢˜**: 6ä¸ª  
- **P3 - ä¼˜åŒ–å»ºè®®**: 2ä¸ª

### ä¿®å¤çŠ¶æ€
- âœ… **å·²ä¿®å¤**: 2ä¸ª
- ğŸ”„ **å¾…ä¿®å¤**: 7ä¸ª
- ğŸ”„ **å¾…ä¼˜åŒ–**: 2ä¸ª

### ä¼˜å…ˆä¿®å¤é¡ºåº
1. **P1é—®é¢˜** (ä¸¥é‡é—®é¢˜):
   - é—®é¢˜2: æ—¶é—´æˆ³è®¡ç®—å¼‚å¸¸
   - é—®é¢˜7: å†…å­˜æ³„æ¼é£é™© (å·²éƒ¨åˆ†è§£å†³)
   - é—®é¢˜9: æƒé™éªŒè¯ä¸å¤Ÿä¸¥æ ¼
   - é—®é¢˜10: å¹¶å‘æ“ä½œå†²çª

2. **P2é—®é¢˜** (ä¸€èˆ¬é—®é¢˜):
   - é—®é¢˜3: é”™è¯¯å¤„ç†è¦†ç›–ä¸å®Œæ•´
   - é—®é¢˜4: ç§»åŠ¨ç«¯é€‚é…éªŒè¯ä¸å……åˆ†
   - é—®é¢˜6: å¤§å®¶åº­æˆå‘˜åˆ—è¡¨æ€§èƒ½
   - é—®é¢˜8: å®¶åº­ç å®‰å…¨æ€§
   - é—®é¢˜11: è¾¹ç•Œæ¡ä»¶æµ‹è¯•ä¸è¶³

3. **P3é—®é¢˜** (ä¼˜åŒ–å»ºè®®):
   - é—®é¢˜5: æ— éšœç¢è®¿é—®æ”¯æŒç¼ºå¤±

---

## åç»­è¡ŒåŠ¨è®¡åˆ’

### çŸ­æœŸè®¡åˆ’ (1-2å¤©)
1. ä¿®å¤æ—¶é—´æˆ³è®¡ç®—é—®é¢˜
2. åŠ å¼ºæƒé™éªŒè¯æœºåˆ¶
3. è¡¥å……é”™è¯¯å¤„ç†æµ‹è¯•
4. å®Œå–„è¾¹ç•Œæ¡ä»¶æµ‹è¯•

### ä¸­æœŸè®¡åˆ’ (1å‘¨)
1. å®ç°å¹¶å‘å†²çªæ£€æµ‹
2. ä¼˜åŒ–å¤§åˆ—è¡¨æ€§èƒ½
3. åŠ å¼ºå®¶åº­ç å®‰å…¨æ€§
4. å®ŒæˆçœŸå®è®¾å¤‡æµ‹è¯•

### é•¿æœŸè®¡åˆ’ (1ä¸ªæœˆ)
1. å®ç°æ— éšœç¢è®¿é—®æ”¯æŒ
2. å»ºç«‹å®Œæ•´çš„ç›‘æ§ä½“ç³»
3. ä¼˜åŒ–ç”¨æˆ·ä½“éªŒç»†èŠ‚
4. å»ºç«‹è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹

---

**æ–‡æ¡£ç»´æŠ¤**: æœ¬æ–‡æ¡£å°†æŒç»­æ›´æ–°ï¼Œè®°å½•æ–°å‘ç°çš„é—®é¢˜å’Œè§£å†³è¿›å±•  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ7æ—¥ 12:00  
**ä¸‹æ¬¡æ›´æ–°**: å®Œæ•´æµ‹è¯•å®Œæˆå